{% extends 'portal/base.html' %}

{% block title %}Staff | Administrare{% endblock %}

{% block content %}
<div class="d-flex align-items-center justify-content-between mb-3">
  <div>
    <h1 class="h5 mb-0">Utilizatori Staff</h1>
    <div class="text-muted small">Staff poate vizualiza datele în platformă, dar nu poate modifica chestionare / experți / newslettere.</div>
  </div>
  <div class="d-flex gap-2">
    <a class="btn btn-light btn-sm" href="{% url 'admin_dashboard' %}"><i class="bi bi-arrow-left me-1"></i>Înapoi la Panou</a>
    <a class="btn btn-outline-secondary btn-sm" href="{% url 'admin_staff_create' %}"><i class="bi bi-person-badge me-1"></i>Staff nou</a>
  </div>
</div>

<div class="card shadow-sm gov-card">
  <div class="card-body p-0">
    <div class="table-responsive">
      <table class="table table-hover align-middle mb-0">
        <thead class="table-light">
          <tr>
            <th>Nume</th>
            <th>Email</th>
            <th class="text-nowrap">Activ</th>
            <th class="text-nowrap">Ultima autentificare</th>
            <th class="text-end">Acțiuni</th>
          </tr>
        </thead>
        <tbody>
          {% for u in staff_users %}
            <tr>
              <td class="fw-semibold">{{ u.get_full_name|default:u.username }}</td>
              <td><a class="text-decoration-none" href="mailto:{{ u.email }}">{{ u.email }}</a></td>
              <td>
                {% if u.is_active %}
                  <span class="badge text-bg-success">Activ</span>
                {% else %}
                  <span class="badge text-bg-secondary">Inactiv</span>
                {% endif %}
              </td>
              <td class="text-muted small">{% if u.last_login %}{{ u.last_login|date:"d.m.Y H:i" }}{% else %}—{% endif %}</td>
              <td class="text-end">
                <a class="btn btn-sm btn-outline-primary" href="{% url 'admin_staff_edit' u.pk %}"><i class="bi bi-pencil me-1"></i>Editează</a>
              </td>
            </tr>
          {% empty %}
            <tr>
              <td colspan="5" class="text-muted p-3">Nu există utilizatori Staff încă.</td>
            </tr>
          {% endfor %}
        </tbody>
      </table>
    </div>
  </div>
</div>
{% endblock %}
